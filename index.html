<!DOCTYPE html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="//d3js.org/d3.v4.js"></script>
    <style>

      body
      {
          font-family: "Lato", sans-serif;
          background-color: #f5f5f5;
          margin:0;
      }
      div.main
      {
        width:1050px;
        margin: auto;
        padding-top: 50px;
      }
      /* Jquery UI Override */
      .ui-widget
      {
          font-family: "Lato", sans-serif;
      }

      

    </style>
    
    
<style type="text/css">
    
  .text{
    font-size:12px;
    text-transform:capitalize;
  }
  
  svg g text tspan {
    pointer-events: none;
  }
  
  .bar { 
    /*fill: rgb(156, 158, 222);*/
  }
  
  path.domain,
  g.tick,
  g.tick line {
    stroke: #333;
  }
  
  path.domain text,
  g.tick text {
    stroke: none;
  }
  
  .svg-container {
    display:inline;
    height:500px;
  }
  
  .chartTitle {
    font-size:18px;
  }

  .ticks {
    font: 10px sans-serif;
  }
  
  .track,
  .track-inset,
  .track-overlay {
    stroke-linecap: round;
  }
  
  .track {
    stroke: #000;
    stroke-opacity: 0.3;
    stroke-width: 10px;
  }
  
  .track-inset {
    stroke: #ddd;
    stroke-width: 8px;
  }
  
  .track-overlay {
    pointer-events: stroke;
    stroke-width: 50px;
    stroke: transparent;
    cursor: ew-resize;
  }
  
  .handle {
    fill: #fff;
    stroke: #000;
    stroke-opacity: 0.5;
    stroke-width: 1.25px;
  }

  input[type=button] {
    border: none;
    border-radius: 100px;
    color: #fff;
    padding: 10px 20px;
    text-decoration: none;
    margin: 4px 2px;
    cursor: pointer;
  }
  
  input[type=button]:hover {
    color: #fff;    
  }


  input[type=button].bar_hi {
    background-color: rgba(156, 158, 222, .5)
  }
  input[type=button].bar_lo {
    background-color: rgba(214, 97, 107, .5);
  }
  input[type=button].bar_exp {
    background-color: rgba(99, 121, 57, .5);
  }
  input[type=button].about {
    background-color: rgba(0,0,0, .5);
  }
  
  input[type=button].about:hover {
    background-color: rgba(0,0,0, 1);
  }
  input[type=button].bar_lo:hover {
    background-color: rgba(214, 97, 107, 1);
  }
  input[type=button].bar_hi:hover {
    background-color: rgba(156, 158, 222, 1)
  }
  input[type=button].bar_exp:hover {
    background-color: rgba(99, 121, 57, 1);
  }
  
  
  #masthead div#slide_buttons {
    display:inline;
    vertical-align: middle;
    margin-left: 180px;
  }
  #masthead h1 {
    color:#333;
    font-weight: 100;
    font-size:2.2em;
    display:inline;
    vertical-align: middle;
  }

  div#masthead {
    width:1050px;
    margin: auto;
    margin-top: -42px;
  }
  
  div#masthead_bg {
    background-color:#e6e6e6;
    width:100%;
    height:80px;
  }
  
  h3 {
    color:#333;
    font-weight:200;
    font-size:1.8em;
    padding-top:1em;
  }
  
  .columns {
    column-width: 200px;
    max-width: 800px;
    margin: 0 auto;
  }

  .grid {
    font-weight:100;
    font-size:.8em;
    line-height:1.6em;
    color:#333;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-auto-rows: 2em;
    grid-gap: 1.2em;
    height: 1200px;

  }
  
  .top5 text {
    font-size:.7em;
  }
  
  .top5heading {
    font-weight:bold;
  }

  .grid span {
      font-weight:400;
      border: none;
      /*border-radius: 100px;*/
      color: #fff;
      padding: 10px 20px;
      text-decoration: none;
      margin: 4px 2px;
      cursor: pointer;
  }

  #hi_heading {
      background-color: rgb(156, 158, 222);
      opacity: .5;
  }
  #lo_heading {
      background-color: rgb(214, 97, 107);
      opacity: .5;
  }
  #exp_heading {
      background-color: rgb(99, 121, 57);
      opacity: .5;
  }

  #hi_heading:hover {
      opacity: 1;
      cursor: pointer;
  }
  #lo_heading:hover {
      opacity: 1;
      cursor: pointer;
  }
  #exp_heading:hover {
      opacity: 1;
      cursor: pointer;
  }

</style>


    

<title>Word Usage in Wine Reviews</title>



  </head>

  <body>

      
    
<div id="masthead_bg"></div>

<div id="masthead">
  <h1>Word Usage in Wine Reviews</h1>
  
    <div id='slide_buttons' class=''>
        <input 
           class='changeChartButton bar_hi'
           data-chartId="#bar_hi"
           type="button" 
           value="Highest Rated"
            />
        <input 
           class='changeChartButton bar_lo'
           data-chartId="#bar_lo"
           type="button" 
           value="Lowest Rated" 
            />
        <input 
           class='changeChartButton bar_exp'
           data-chartId="#bar_exp"
           type="button" 
           value="Most Expensive" 
            />
        <!--<input -->
        <!--   class='about'-->
        <!--   type="button" -->
        <!--   value="About This Viz" -->
        <!--    />-->
  </div>

</div>


    <div class="main">
      <div> <!-- Slide Show -->
        <section>
        </section>
      </div>
      
      
      
<div>
  <div id='bubble1' class='svg-container'></div>
  <div id='bar_hi' class='svg-container changeChart' 
    ></div>
  <div id='bar_lo' class='svg-container changeChart' 
    style="display:none"
    ></div>
  <div id='bar_exp' class='svg-container changeChart' 
    style="display:none"
    ></div>
  <svg id='slider' width="1024" height="50"></svg>
</div>


<h3>About This Vizualization</h3>
<div class="grid">
  <div>
      <strong>Introduction</strong>
      <p>
      The language of describing wines is very rich and colorful. Wine tasters find small nuances in the flavors and qualities of wines and describe them in such creative and dynamic language that one wonders if the world of winemaking and tasting is a completely separate realm from reality where small differences are multiplied and exaggerated. A world filled with a bounty of foods and fruits encased in flowing crisp fluids or smoky full-bodied syrups.
      </p>
      <p>
      Follow us on a “Martini-Glass” style journey through the language of wine reviews using a dataset containing 130,000 reviews that describe and rate wines from around the world. Using the MetaPy library the wine reviews have been processed to analyze only significant words using a stop filter, and the words have been related to their root word using Stemming. For example, the words “power”, “powers”, and “powerful” are all related to their root word “power”. Each root word is then represented by its most frequent usage which in this case is “powerful”.
      </p>
      <p>
          With this processed collection of reviews there are 3 scenes consisting of 3 parameters (high rating, low rating, and price) which are triggered by buttons in the site header and in the commentary headers. Each scene is indicated by chart color as well as by chart and interface labels. Persisting through each scene is a familiar interface and commentary copy that guides the user through each dataset. There is also a persistent bubble chart containing the most commonly used words as a reference point. Using the slider interface, you can also trigger the dataset size of 25 words to expand to 250 words which is an additional parameter for the number of records shown. This parameter affects all underlying chart data and labels. Each point in the bar charts and bubble chart has additional annotations referring to additional data about a specific word.
      <p>
      <p>
        The annotations are cleared by mouseout events on the data points in the charts, as well as by triggereing scene changes with the colored scene change buttons. The user is made aware of these triggers by way of familliar design elements and use of a unified color scheme. Additionally, using a consistent layout with each scene change and applying design decisions to put emphasis on the hierarchy of specific items, creating a cohesive layout and harmonious design.
      </p>
      <p>

          Data Source:<br />
          <a href="https://www.kaggle.com/zynicide/wine-reviews" target="_blank">www.kaggle.com/zynicide/wine-reviews</a>
      </p>

  </div>
  <div>
      <span id="hi_heading"
            class='changeChartButton '
            data-chartId="#bar_hi">Highest Rated Wines</span>
      <p>
          The highest rated wines scene consists of the words used in the top 100 best rated wines from the source Kaggle data. Looking at the highly rated reviews, the annotated top five words are wine, tannins, fruit, years, and flavors. Among these top 5 only common words with the low rated wines is “wine” and “flavors”, and with the most expensive wines “wine”, “tannins”, and “fruit” are the common words; however, expanding into the top 25, you can see many other words in common. This set is similar as the expensive wine set, in that there are many grandiose words listed. Words such as great, complex, beautiful, powerful among others. The average rating for these words is 88.5 points.
      </p>
      <p>The parameters in this scene are the number of records 1-250 triggered by user interaction with the slider, and the 100 highest rated wines dataset controlled by triggering the blue scene buttons.</p>
  </div>
  <div>
      <span id="lo_heading"
            class='changeChartButton '
            data-chartId="#bar_lo">Lowest Rated Wines</span>
      <p>
          The annotated top five words among the worst 100 rated wines are flavors, wine, aromas, finish, and tastes. It is interesting to note that “flavors” occurred more frequently that “wine” which was most frequent among the highest rated and most expensive sets of data. The average rating of the top 25 words for the low rated wines is 86.1 which is a little over 2 points lower that the highly rated wines. Some very colorful descriptions for the wines in this set show up among the top 25 such as sour, smells, harsh, green, flat, and bitter none of which sound very appetizing when describing a wine.
      </p>
      <p>The parameters in this scene are the number of records 1-250 triggered by user interaction with the slider, and the 100 lowest rated wines dataset controlled by triggering the red scene buttons.</p>
  </div>
  <div>
      <span id="exp_heading"
            class='changeChartButton '
            data-chartId="#bar_exp">Most Expensive Wines</span>
      <p>
          The annotated  top five words among the 100 most expensive wines are wine, fruit, drink, tannins, and acidity. The word usage leans towards more savory flavors where you see words such as smoky, spice, wood, and herb. Age is also a theme among the descriptions are references to a wines maturity, age, and vintage are used. Luxurious sounding words such as elegant, opulent, velvet, generous, and fine also show up more frequently. Among the top 25 the range of average prices is between $644 for “spice” on the low end and $1020 on the high end for the word “ripe” which are quite pricy on both ends of the spectrum.
      </p>
      <p>The parameters in this scene are the number of records 1-250 triggered by user interaction with the slider, and the 100 most expensive wines dataset controlled by triggering the green scene buttons.</p>
  </div>
  <div></div>
</div>




    </div>
      
    


<script>

initNum = 25;
animateFormNum = 1;
opacityStart = 0.50;
opacityRollover = 1.0;
chartText = "#333";

barChartWidth = 624;
barChartHeight = 400;

var format = d3.format(",d");

var changeChartButtons = d3.selectAll(".changeChartButton")
  .on("click", function(d){
    showChartId = d3.select(this).attr("data-chartId");
    d3.selectAll(".changeChart")
      .style("display", "none");
    d3.select(showChartId)
      .style("display", "inline");
  });
  
var tooltip = d3.select("body")
    .append("div")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden")
    .style("color", "white")
    .style("padding", "8px")
    .style("background-color", "rgba(0, 0, 0, 0.75)")
    .style("border-radius", "6px")
    .style("font", "12px sans-serif")
    .text("tooltip");

var wordData = {};
var hiData = {};
var loData = {};
var expData = {};

d3.queue()
    .defer(d3.csv, "../../static/data/word_count_overall.csv")
    .defer(d3.csv, "../../static/data/word_count_stats_rating_hi.csv")
    .defer(d3.csv, "../../static/data/word_count_stats_rating_lo.csv")
    .defer(d3.csv, "../../static/data/word_count_stats_expensive.csv")
    .await(analyze);

function analyze(error, words1, words2, words3, words4) {
    if(error) { console.log(error); }
    wordData = words1;
    hiData = words2;
    loData = words3;
    expData = words4;
    initializeWordCount(animateFormNum);
    initializeWordCountHi(animateFormNum);
    initializeWordCountLo(animateFormNum);
    initializeWordCountExp(animateFormNum);
    initSlider();
}


</script>

<script src="/static/js/tooltip.js"></script>
<script src="/static/js/slider.js"></script>
<script src="/static/js/word-count-bubble.js"></script>
<script src="/static/js/word-count-hi-bar.js"></script>
<script src="/static/js/word-count-lo-bar.js"></script>
<script src="/static/js/word-count-exp-bar.js"></script>


    
  </body>
</html>
